(this["webpackJsonppaygate-demo"]=this["webpackJsonppaygate-demo"]||[]).push([[0],{13:function(e,n,t){e.exports=t(21)},18:function(e,n,t){},19:function(e,n,t){},21:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(3),c=t.n(r),i=(t(18),t(4)),l=t.n(i),u=(t(19),t(1)),s=t.n(u),p=t(5),d=t(11),f=t(6),h=t(7),m=t(12),g=t(10),v=t(8),y=t.n(v),w=t(9),E="monde.ngalonkulu@nimbletech.co.za",b=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(){var e;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))).initiate=function(){var n=new FormData;n.append("PAYGATE_ID","10011072130"),n.append("REFERENCE","pgtest_123456789"),n.append("AMOUNT","3299"),n.append("CURRENCY","ZAR"),n.append("RETURN_URL","https://ndeoligence.github.io/paygate-demo"),n.append("TRANSACTION_DATE",e.fmt(new Date)),n.append("LOCALE","en-za"),n.append("COUNTRY","ZAF"),n.append("EMAIL",E);var t=e.calcChecksum(n,"secret");return n.append("CHECKSUM",t),n},e.redirect=function(n){console.log("[debug] redirect"),console.log("[debug] data:"),console.log(n);var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded");var a=new URLSearchParams;return console.log("[debug] urlencoded:"),console.log(a),n.forEach((function(e,n,t){a.append(n,e)})),a.append("CHECKSUM",e.calcChecksum(a,"secret")),console.log("[debug] data:"),console.log(a),fetch("https://secure.paygate.co.za/payweb3/query.trans",{method:"POST",headers:t,body:a,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))},e.collectData=function(e){var n=new Map;return e&&e.split(/[&]/).forEach((function(e){if(!e.match(/^CHECKSUM=/)){var t=e.split(/=/);n.set(t[0],t[1])}})),n},e.func=function(n){var t=e.initiate();fetch("https://secure.paygate.co.za/payweb3/initiate.trans",{method:"POST",body:t,redirect:"follow"}).then((function(e){return e.text()})).then((function(n){return console.log(n),e.collectData(n)})).then((function(n){return console.log(n),e.redirect(n)})).catch((function(e){return console.log("error",e)}))},e.calcChecksum=function(e,n){var t,a=[],o=Object(d.a)(e.values());try{for(o.s();!(t=o.n()).done;){var r=t.value;a.push(r)}}catch(c){o.e(c)}finally{o.f()}return y()("".concat(a.join("")).concat(n))},e.fmt=function(e){return Object(w.asString)("yyyy-MM-dd hh:mm:ss",e)},e}return Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(n){return e.func(n)}},"Pay"))}},{key:"postData",value:function(){var e=Object(p.a)(s.a.mark((function e(){var n,t,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",t=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",fetch(n,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component);var C=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:l.a,className:"App-logo",alt:"logo"}),o.a.createElement(b,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"}},[[13,1,2]]]);
//# sourceMappingURL=main.0943af36.chunk.js.map